<!DOCTYPE html>
<html lang="zh">
<head>
	<title>个人主页</title>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="style/public.css">
	<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
	<style>
		.wrap{max-width:700px;margin:0 auto 3rem;}
		.mine_info{margin-top:20px}
		.mine_info .realname{
			font-size: 18px;
		    display: inline-block;
		    color: #888;
		    position: absolute;
		    top: 5px;
		    left: 110px;}

    	.mine_info .numid{
    		position: absolute;
    		left:110px;
    		top:30px;
    		color:#888;
    	}
    	.mine_info .telephone{
    		position: absolute;
    		left:110px;
    		top:55px;
    		color:#888;
    	}
		.cate a{display:inline-block;width:210px;color:#888;text-decoration:none}
		.cate span{float: right;line-height:50px;margin-right:30px;color:#ccc}
		.cateform{
			margin-left:20px;
		}
		.mine_info form.open{display: block;}
		.mine_info .info_spec{height:40px;line-height:40px;background:#fff;margin:6px auto;border-bottom:1px solid #efefef;}
		.mine_info .info_spec input,.mine_info select{height:40px;line-height:40px;-webkit-appearance:none;margin-right:20px;background:#fff;text-align:right;width:200px;font-size:16px;color:#555;border:none;outline: none;float:right;}
		.mine_info select{direction:rtl;}

		.marry,.age,.house,.education,.height,.weight,.income{
	    border:1px solid #efefef;
	    border-radius:0;
	    line-height: 20px;
	    outline: none;
	    font-size:16px;
		background:#fff;}
       	/* 城市选择 */
.hzw-city-picker{
	position: absolute;
	border: 2px solid #c9cbce;
	background: #ffffff;
	z-index: 999999;
	width:100%;
	box-sizing:border-box;
	font-size: 0;
}
.hzw-city-picker:before, .hzw-city-picker:after{
	content: '';
	display: block;
	width: 0;
	height: 0;
	border-width: 10px;
	border-style: solid;
	position: absolute;
	left: 20px;
	z-index: 999999;
}
.hzw-city-picker:before{
	border-color: transparent transparent #ffffff;
	top: -17px;
	z-index: 9999999;
}
.hzw-city-picker:after{
	border-color: transparent transparent #c9cbce;
	top: -20px;
}
.hzw-city-picker *{
	box-sizing: border-box;
	margin: 0 auto;
	padding: 0;
	color: #666666;
	font-family: "Microsoft YaHei";
	font-size: 14px;
}
.hzw-city-picker ul{
	list-style: none;
}
.hzw-city-picker ul li{
	display: inline-block;
	position: relative;
	margin: 1px;
	cursor: pointer;
}
.hzw-city-picker p{
	font-weight: bold;
	padding: 0 4px;
	margin-top: 4px;
	margin-bottom: 10px;
}
.hzw-city-picker .line{
	display:none;
	width: 100%;
	margin: 0 auto;
	margin-top: 8px;
	margin-bottom: 4px;
	border-bottom: 1px solid #d8d8d8;
}

/*热门城市*/
.hzw-city-picker .hzw-hot-wrap{
	background: #ffffff;
	padding: 9px 0;
	display: none;
}
.hzw-city-picker .hzw-hot-wrap ul li{
	width: 68px;
	height: 40px;
	text-align: center;
	line-height: 40px;
	color: #666666;
	background-color: #f5f5f5;
}
.hzw-city-picker .hzw-hot-wrap ul li:hover{
	color: #ff00ff;
}

/*选择省份*/
.hzw-city-picker .hzw-wrap{
	position: relative;
	background: #ffffff;
	padding: 9px 0;
}
.hzw-city-picker .hzw-province-name{
	display: inline-block;
	width: 68px;
	height: 40px;
	text-align: center;
	line-height: 40px;
	position: relative;
	background-color: #f5f5f5;
}
.hzw-city-picker .hzw-province-name:hover{
	color: #ff00ff;
}

.hzw-city-picker .hzw-province.active{
	z-index: 999999999;
}
.hzw-city-picker .hzw-province-name.active{
	border: 1px solid #D8D8D8;
	border-bottom-color: #ffffff;
	color: #ff00ff;
	background-color: #ffffff;
}
.hzw-city-picker .hzw-city-wrap{
	display: none;
	border: 1px solid #D8D8D8;
	background: #ffffff;
	position: absolute;
	top: 39px;
	width: 304px;
	padding: 10px;
}
.hzw-city-picker .hzw-city{
	width: 68px;
	height: 40px;
	text-align: center;
	line-height: 40px;
	color: #999999;
	background-color: #f5f5f5;
	overflow: hidden;
	white-space: nowrap;
	text-overflow: ellipsis;
}
.hzw-city-picker .hzw-city:hover{
	color: #ff00ff;
}
		.tel_hide,.tel_show{float:right;}
		.tel_show{margin-right:20px}
		#hide_telephone,#show_telephone{width:20px;height:40px;margin:0 6px;vertical-align:sub;}
		#hide_telephone,#show_telephone{-webkit-appearance:radio}
		.update{-webkit-appearance:none;width:100px;text-align:center;height:50px;background:#00c8ff;border: none;color: #fff;font-size:16px;position:fixed;bottom:0;left:0;width:100%}
		.pwd{height:40px;line-height:40px;width:100px;display:block;margin:0 auto;background:#b97373;text-align:center;color:#fff}
		#like_detial,#who_like_detial{margin-left:20px;margin-top:10px}
		#like_detial a,#who_like_detial a{margin-right:2px;display:inline-block;}
		#like_detial img,#who_like_detial img{width:50px;height:50px;}
		.lead_vip{height: 50px;vertical-align:bottom;line-height: 50px;color:#267bd0;margin-left:10px;font-size:17px}
		.tips p{
			line-height:30px;background:#efefef;
		}
		.touxiang_zhe{width:100%;height:100%;background:rgba(0,0,0,0.9);position:fixed;left:0;top:0;z-index:9999}
	</style>
</head>
<body>
<div class="head">基本资料</div>
<div class="wrap">
	<div class="mine_info">
		<form class="cateform"  method="post">
			<p class="info_spec"><span>居住城市</span><input type="text" placeholder="请选择" id="cityChoice" name="live" readonly="readonly" value="" /></p>
			<p class="info_spec"><span>昵称</span><input id="nickname" type="text" placeholder="请填写" name="realname" value="" /></p>
			<p class="info_spec"><span>微信号</span><input type="text" placeholder="请填写" name="wechat" id="wechat" value="" /></p>
			<p class="info_spec"><span>职业</span><input type="text" placeholder="请填写"name="occupation" id="occupation" value="" /></p>

			<div class="info_spec"><span>年龄</span>
					<select class="age" name="age">
					  <option selected disabled="true">请选择</option>
					</select>
			</div>
			<p class="info_spec"><span>婚姻状况</span>
				<select class="marry" name="marry">
				  <option selected disabled="true">请选择</option>
				  <option value ="未婚" >未婚</option>
				  <option value ="离异" >离异</option>
				  <option value ="丧偶" >丧偶</option>
				</select>
<!-- 			<p class="info_spec"><span>民族</span><input type="text" placeholder="民族" name="nation" value="<?php echo $nation ?>" /></p>
 -->
			<p class="info_spec"><span>家乡</span><input type="text"  placeholder="请选择" id="oldcityChoice" name="hometown" readonly="readonly" value="" /></p>
			<p class="info_spec"><span>学历</span>
				<select class="education" name="education">
				  <option selected disabled="true">请选择</option>
				  <option value ="大专" >大专</option>
				  <option value ="本科" >本科</option>
				  <option value ="硕士" >硕士</option>
				  <option value ="博士" >博士</option>
				  <option value ="高中" >高中</option>
				  <option value ="初中" >初中</option>
				</select>
			<p class="info_spec"><span>身高</span>
				<select class="height" name="height">
				  <option selected disabled="true">请选择</option>
				</select>
			</p>
			<p class="info_spec"><span>体重</span>
				<select class="weight" name="weight">
				  <option selected disabled="true">请选择</option>
				  
				</select>
			</p>
			<p class="info_spec"><span>收入</span>
				<select class="income" name="income">
				  <option selected disabled="true">请选择</option>
				  <option value ="1千-5千" >1千 - 5千/月</option>
				  <option value ="5千-1万" >5千 - 1万/月</option>
				  <option value ="1万-3万" >1万 - 3万/月</option>
				</select>
			</p>
			<p class="info_spec"><span>住房情况</span>
				<select class="house" name="house">
				  <option selected disabled="true">请选择</option>
				  <option value ="租房" >租房</option>
				  <option value ="已购房" >已购房</option>
				  <option value ="单位宿舍" >单位宿舍</option>
				  <option value ="和家人同住" >和家人同住</option>
				</select>
			</p>
			<p class="info_spec">
				手机号公开：<label class="tel_show" for="show_telephone">显示</label><input type="radio" name="public_telephone" id="show_telephone" value="0" />
						  <label class="tel_hide" for="hide_telephone">隐藏</label><input type="radio" name="public_telephone" id="hide_telephone" value="1"  />
			</p>
			<p class="info_spec" style="border-top:1px solid #efefef;padding:10px 0"><a href="pwd.php" class="pwd">修改密码</a></p>
			<p style="text-align:center;"><input type="submit" class="update" value="保存"></p>
		</form>
	</div>
</div>
<script src="js/jquery.js"></script>
<script type="text/javascript" src="js/city-data.js"></script>
<script type="text/javascript" src="js/hzw-city-picker.min.js"></script>
<script>

$(".cateform").submit(function(){
    var wechat = document.getElementById('wechat').value;
    if(!(/^[a-zA-Z\d_]{0,}$/.test(wechat))){ 
        alert("微信号填写错误");  
        return false; 
    }

    var nickname = document.getElementById('nickname').value;
    if(nickname.length>10){ 
        alert("填写昵称过长，请缩短点");  
        return false; 
    }
});


//城市选择
    var cityPicker = new HzwCityPicker({
        data: data,
        target: 'cityChoice',
        valType: 'k-v',
        hideCityInput: {
            name: 'city',
            id: 'city'
        },
        hideProvinceInput: {
            name: 'province',
            id: 'province'
        },
        callback: function(){
            console.log("ok");
        }
    });
    cityPicker.init();

    var cityPicker = new HzwCityPicker({
        data: data,
        target: 'oldcityChoice',
        valType: 'k-v',
        hideCityInput: {
            name: 'city',
            id: 'city'
        },
        hideProvinceInput: {
            name: 'province',
            id: 'province'
        },
        callback: function(){
            console.log("ok");
        }
    });
    cityPicker.init();
    $("#cityChoice,#oldcityChoice").live("click",function(){
    	$("#hzw_city_picker").css("left","0");
    });

</script>
<script>
	//jaxa去请求数据
	$.ajax({
		type:"post",
		url:"http://hongbaocun.com/m/mine_info.php",
		async:true,
		success:function(meg){
			console.log(meg);
			var obj = eval("("+meg+")");
			$("#cityChoice").val(obj.live);
			$("#nickname").val(obj.realname);
			$("#wechat").val(obj.wechat);
			$("#occupation").val(obj.occupation);
			$(".info_spec .marry option").html(obj.marry);
			$("#oldcityChoice").val(obj.hometown);
			var ops = $(".info_spec .education option");
			for(var i=0;i<ops.length;i++){
				if(ops[i].value==obj.education){
					ops[i].setAttribute("selected","true");
				}
			};
		  	for (var i=18; i < 80; i++) {
		  		if (obj.age==i) {
		  			var opSed = "<option selected value="+i+">"+i+"岁</option>";
			  		$(".info_spec .age").append(opSed);
		  		}else{
		  			var op = "<option value="+i+">"+i+"岁</option>";
			  		$(".info_spec .age").append(op);
		  		}
		  	};
		  	for (var i=140 ;i < 210 ; i++) {
		  		if (obj.height==i) {
		  			var opSed = "<option selected value="+i+">"+i+"厘米</option>";
			  		$(".info_spec .height").append(opSed);
		  		}else{
		  			var op = "<option value="+i+">"+i+"厘米</option>";
			  		$(".info_spec .height").append(op);
		  		}
		  	};
		  	for (var i=40 ;i < 100 ; i++) {
		  		if (obj.weight==i) {
		  			var opSed = "<option selected value="+i+">"+i+"公斤</option>";
			  		$(".info_spec .weight").append(opSed);
		  		}else{
		  			var op = "<option value="+i+">"+i+"公斤</option>";
			  		$(".info_spec .weight").append(op);
		  		}
		  	};
		  	var income = $(".info_spec .income option");
		  	for(var i=0;i<income.length;i++){
				if(income[i].value==obj.income){
					income[i].setAttribute("selected","true");
				}
			};
			var house = $(".info_spec .house option");
		  	for(var i=0;i<house.length;i++){
				if(house[i].value==obj.house){
					house[i].setAttribute("selected","true");
				}
			};
			if (obj.public_telephone==1) {
				$("#hide_telephone").attr("checked","checked");
			} else{
				$("#show_telephone").attr("checked","checked");
			};
		},error:function(e){
			alert('请求数据失败!')
			return false;
		}
	});
</script>
</body>
</html>